<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Daily Lifestyle Tracking ‚Äî Diet Tracker</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* ================================================
   ADD THIS ‚Äî FULL MOBILE RESPONSIVENESS
================================================ */

/* Medium screens (tablets) */
@media (max-width: 1024px) {
    .wrap {
        grid-template-columns: 1fr;
        padding: 10px;
    }

    .sidebar {
        width: 100%;
        position: relative;
        height: auto;
    }

    .stats {
        grid-template-columns: repeat(2, 1fr);
    }

    .grid {
        grid-template-columns: 1fr;
    }
}

/* Phones */
@media (max-width: 768px) {

    /* ----- Sidebar collapses to top bar ----- */
    .sidebar {
        width: 100% !important;
        height: auto !important;
        padding: 12px !important;
        display: flex !important;
        flex-direction: row !important;
        justify-content: space-between !important;
        align-items: center !important;
        gap: 10px;
    }

    .brand h3 {
        font-size: 15px;
        margin-bottom: 0;
    }

    .menu, .tips {
        display: none;  /* hide big sections on mobile */
    }

    /* ----- Main layout shifts downward ----- */
    .main {
        margin-top: 10px;
    }

    /* ----- Form becomes 1-column ----- */
    .formCard {
        flex-direction: column !important;
    }

    .formCol {
        width: 100% !important;
    }

    .actions {
        width: 100% !important;
        flex-direction: row !important;
        justify-content: space-between;
    }

    .actions button {
        flex: 1;
    }

    /* ----- Stats become 1 column ----- */
    .stats {
        grid-template-columns: 1fr !important;
    }

    /* ----- Charts stack ----- */
    .grid {
        grid-template-columns: 1fr !important;
        gap: 16px !important;
    }

    .card canvas {
        height: 220px !important;
    }

    /* Buttons easier to tap */
    .controls {
        flex-wrap: wrap;
        gap: 6px;
    }

    .controls .btn {
        flex: 1 1 calc(50% - 6px);
        text-align: center;
    }
}

/* Very small phones */
@media (max-width: 480px) {
    .title h1 {
        font-size: 16px !important;
    }

    .controls .btn {
        flex: 1 1 100%;
    }

    .card canvas {
        height: 180px !important;
    }
}

/* ---------------------------------------------------
   LIGHT MODE (DEFAULT) ‚Äî GREEN THEME
--------------------------------------------------- */
:root {
    --bg: #f6fbf9;
    --panel: #ffffff;
    --muted: #5b6662;
    --accent: #1f9a4a; 
    --accent-2: #f4b740;
    --surface: #f0f6f2;
    --txt: #07140f;
    --radius: 10px;
    --gap: 10px;

    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto;
    font-size: 14px;
}

/* ---------------------------------------------------
   GENERAL LAYOUT
--------------------------------------------------- */
html, body {
    margin: 0;
    background: var(--bg);
    color: var(--txt);
    height: 100%;
}

.wrap {
    max-width: 1100px;
    margin: 18px auto;
    padding: 12px;
    display: grid;
    grid-template-columns: 220px 1fr;
    gap: 16px;
    align-items: start;
}

/* ---------------------------------------------------
   SIDEBAR
--------------------------------------------------- */
.sidebar {
    background: var(--panel);
    border-radius: 10px;
    padding: 14px;
    border: 1px solid rgba(6,10,8,0.04);
    height: calc(100vh - 48px);
    position: sticky;
    top: 12px;
    box-shadow: 0 6px 18px rgba(6,10,8,0.04);
}

.brand {
    margin-bottom: 12px;
}

.brand h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 800;
}

.menu {
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-top: 8px;
}

.menu button {
    background: transparent;
    border: 0;
    padding: 8px;
    border-radius: 8px;
    text-align: left;
    color: var(--muted);
    font-weight: 700;
    cursor: default;
}

.menu button.active {
    color: var(--accent);
    background: rgba(31,154,74,0.10);
}

.tips {
    margin-top: 14px;
    color: var(--muted);
    font-size: 13px;
    line-height: 1.4;
}

/* ---------------------------------------------------
   HEADER
--------------------------------------------------- */
.main {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.title h1 {
    margin: 0;
    font-size: 18px;
}

.title p {
    margin: 0;
    font-size: 13px;
    color: var(--muted);
}

/* ---------------------------------------------------
   CONTROLS
--------------------------------------------------- */
.controls {
    display: flex;
    gap: 8px;
    align-items: center;
}

.btn {
    padding: 7px 10px;
    border-radius: 8px;
    border: 0;
    cursor: pointer;
    font-weight: 700;
    font-size: 13px;
}

.btn.primary {
    background: var(--accent);
    color: white;
}

.btn.ghost {
    background: #fff;
    border: 1px solid rgba(6,10,8,0.08);
    color: var(--muted);
}

/* ---------------------------------------------------
   FORM
--------------------------------------------------- */
.formCard {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: flex-end;
    padding: 12px;
    border-radius: 10px;
    background: var(--panel);
    border: 1px solid rgba(6,10,8,0.05);
}

.formCol {
    display: flex;
    flex-direction: column;
    gap: 6px;
    min-width: 120px;
    flex: 1;
}

label {
    font-size: 12px;
    color: var(--muted);
    margin-bottom: 2px;
}

input, select {
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #e8f0ec;
    background: var(--surface);
    font-size: 14px;
    color: var(--txt);
}

.actions {
    display: flex;
    flex-direction: column;
    gap: 6px;
    min-width: 90px;
}

/* ---------------------------------------------------
   STATS
--------------------------------------------------- */
.stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}

.stat {
    background: var(--panel);
    padding: 10px;
    border-radius: 8px;
    border: 1px solid rgba(6,10,8,0.04);
}

.stat .label {
    font-size: 12px;
    color: var(--muted);
}

.stat .value {
    font-weight: 800;
    margin-top: 6px;
    font-size: 16px;
}

/* ---------------------------------------------------
   CHARTS
--------------------------------------------------- */
.grid {
    display: grid;
    grid-template-columns: 1fr 340px;
    gap: 12px;
}

.card {
    background: var(--panel);
    padding: 12px;
    border-radius: 10px;
    border: 1px solid rgba(6,10,8,0.05);
}

/* ---------------------------------------------------
   DARK MODE ‚Äî BLUE THEME
--------------------------------------------------- */
.dark {
    --bg: #05111f;
    --panel: #0b1b2c;
    --txt: #e8f4ff;
    --muted: #9db4c7;
    --accent: #3ba4ff;
    --accent-2: #ffd66b;
    --surface: #0a1a28;
}

.dark input, 
.dark select {
    background: #0d2233;
    border: 1px solid rgba(255,255,255,0.06);
    color: var(--txt);
}

/* Responsive */
@media (max-width: 980px) {
    .wrap {
        grid-template-columns: 1fr;
        padding: 10px;
    }

    .stats {
        grid-template-columns: repeat(2, 1fr);
    }

    .grid {
        grid-template-columns: 1fr;
    }
}
</style>
</head>


<body>

<div class="wrap">
    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="brand">
            <h3>Diet Tracker</h3>
            <div style="color:var(--muted);font-size:12px">Health Monitor</div>
        </div>

        <nav class="menu">
            <button class="active">Dashboard</button>
        </nav>

        <div class="tips">
            <strong style="color:var(--txt);">Quick Tips</strong>
            <ul style="margin-left:18px;padding:0;">
                <li>Log daily for accurate trends</li>
                <li>Drink at least 6 cups water</li>
                <li>Prefer balanced meals</li>
            </ul>
        </div>
    </aside>




    <!-- MAIN -->
    <main class="main">
        <header class="header">
            <div class="title">
                <h1>Daily Lifestyle Tracking</h1>
                <p>Calorie Statistics</p>
            </div>

            <div class="controls">
                <button class="btn ghost" id="themeToggle">üåô</button>
                <button class="btn primary" id="saveBtnTop">Save Entry</button>
                <button class="btn ghost" id="exportBtnTop">Export CSV</button>
                <button class="btn ghost" id="sampleBtnTop">Sample</button>
                <button class="btn ghost" id="clearBtnTop">Clear</button>
            </div>
        </header>




        <!-- FORM -->
        <section class="formCard">
            <div class="formCol" style="flex:0 0 130px">
                <label>Date</label>
                <input id="date" type="date">
            </div>

            <div class="formCol" style="flex:0 0 110px">
                <label>Sleep (hrs)</label>
                <input id="sleep" type="number" step="0.1" placeholder="7.5">
            </div>

            <div class="formCol" style="flex:1 1 220px">
                <label>Food</label>
                <select id="food">
                    <option value="">Select food</option>
                    <optgroup label="Healthy">
                        <option>Vegetables</option>
                        <option>Fruits</option>
                        <option>High-Protein Meal</option>
                        <option>Whole Grains</option>
                        <option>Balanced Home Meal</option>
                    </optgroup>
                    <optgroup label="Unhealthy">
                        <option>Fast Food</option>
                        <option>Processed Snacks</option>
                        <option>Sugary Drinks</option>
                        <option>Fried Foods</option>
                        <option>Sweets / Desserts</option>
                    </optgroup>
                    <optgroup label="Neutral / Mixed">
                        <option>Mixed Meal</option>
                        <option>Average Home Meal</option>
                        <option>Canteen Food</option>
                    </optgroup>
                </select>
            </div>

            <div class="formCol" style="flex:0 0 110px">
                <label>Water (cups)</label>
                <input id="water" type="number" step="1" placeholder="5">
            </div>

            <div class="formCol" style="flex:0 0 110px">
                <label>Exercise (min)</label>
                <input id="exercise" type="number" step="1" placeholder="20">
            </div>

            <div class="actions">
                <button class="btn primary" id="saveBtn">Save</button>
                <button class="btn ghost" id="resetForm">Reset</button>
            </div>
        </section>




        <!-- STATS -->
        <section class="stats">
            <div class="stat"><div class="label">Avg Sleep</div><div class="value" id="avgSleep">-</div></div>
            <div class="stat"><div class="label">% Healthy</div><div class="value" id="pctHealthy">-</div></div>
            <div class="stat"><div class="label">Avg Water (cups)</div><div class="value" id="avgWater">-</div></div>
            <div class="stat"><div class="label">Entries</div><div class="value" id="totalEntries">0</div></div>
        </section>




        <!-- CHARTS -->
        <section class="grid">
            <div class="card">
                <strong>Sleep ‚Äî Recent</strong>
                <canvas id="sleepChart" height="220"></canvas>
            </div>

            <aside class="card" style="display:flex;flex-direction:column;gap:12px;">
                <div>
                    <strong>Food Distribution</strong>
                    <canvas id="foodChart" height="150"></canvas>
                </div>

                <div>
                    <strong>Water Intake</strong>
                    <canvas id="waterChart" height="120"></canvas>
                </div>
            </aside>
        </section>

    </main>
</div>







<!-- ---------------------------------------------------
     JAVASCRIPT (FUNCTIONALITY)
--------------------------------------------------- -->
<script>
const KEY = "diet_tracker_compact_v1";

function loadData() {
    try { return JSON.parse(localStorage.getItem(KEY) || "[]"); }
    catch { return []; }
}

function saveData(arr) {
    localStorage.setItem(KEY, JSON.stringify(arr));
}

const dateEl = document.getElementById("date");
const sleepEl = document.getElementById("sleep");
const foodEl = document.getElementById("food");
const waterEl = document.getElementById("water");
const exerciseEl = document.getElementById("exercise");

const saveBtn = document.getElementById("saveBtn");
const saveBtnTop = document.getElementById("saveBtnTop");
const exportBtnTop = document.getElementById("exportBtnTop");
const sampleBtnTop = document.getElementById("sampleBtnTop");
const clearBtnTop = document.getElementById("clearBtnTop");
const resetBtn = document.getElementById("resetForm");
const themeToggle = document.getElementById("themeToggle");

const avgSleepEl = document.getElementById("avgSleep");
const pctHealthyEl = document.getElementById("pctHealthy");
const avgWaterEl = document.getElementById("avgWater");
const totalEntriesEl = document.getElementById("totalEntries");

let sleepChart = null;
let waterChart = null;
let foodChart = null;

function average(arr, key) {
    if (!arr.length) return 0;
    return arr.reduce((a, b) => a + Number(b[key] || 0), 0) / arr.length;
}

function render() {
    const data = loadData().sort((a, b) => a.date.localeCompare(b.date));

    if (!data.length) {
        avgSleepEl.textContent = "-";
        pctHealthyEl.textContent = "-";
        avgWaterEl.textContent = "-";
        totalEntriesEl.textContent = "0";
        destroyCharts();
        return;
    }

    avgSleepEl.textContent = average(data, "sleep").toFixed(2) + " hrs";
    avgWaterEl.textContent = average(data, "water").toFixed(2);
    totalEntriesEl.textContent = data.length;

    const healthyFoods = new Set([
        "Vegetables","Fruits","High-Protein Meal","Whole Grains","Balanced Home Meal"
    ]);

    let healthyCount = 0;
    const foodCounts = {};

    data.forEach(entry => {
        const f = entry.food || "Unknown";
        foodCounts[f] = (foodCounts[f] || 0) + 1;
        if (healthyFoods.has(f)) healthyCount++;
    });

    pctHealthyEl.textContent = Math.round((healthyCount / data.length) * 100) + "%";

    const labels = data.map(e => e.date);
    const sleepData = data.map(e => Number(e.sleep));
    const waterData = data.map(e => Number(e.water));

    destroyCharts();

    sleepChart = new Chart(document.getElementById("sleepChart"), {
        type: "line",
        data: {
            labels,
            datasets: [{
                label: "Sleep (hrs)",
                data: sleepData,
                borderColor: "#1f9a4a",
                backgroundColor: "rgba(31,154,74,0.10)",
                tension: 0.25,
                pointRadius: 3
            }]
        },
        options: { plugins: { legend: { display: false } } }
    });

    foodChart = new Chart(document.getElementById("foodChart"), {
        type: "pie",
        data: {
            labels: Object.keys(foodCounts),
            datasets: [{
                data: Object.values(foodCounts),
                backgroundColor: ["#7bd389","#f7d774","#ff9e9e","#81f7b9","#a1d4ff","#ffb36b"]
            }]
        },
        options: { plugins: { legend: { position: "bottom" } } }
    });

    waterChart = new Chart(document.getElementById("waterChart"), {
        type: "line",
        data: {
            labels,
            datasets: [{
                label: "Water (cups)",
                data: waterData,
                borderColor: "#1f9a4a",
                backgroundColor: "rgba(31,154,74,0.10)",
                tension: 0.25,
                pointRadius: 3
            }]
        },
        options: { plugins: { legend: { display: false } } }
    });
}

function destroyCharts() {
    if (sleepChart) sleepChart.destroy();
    if (foodChart) foodChart.destroy();
    if (waterChart) waterChart.destroy();
}

function saveEntry() {
    const entry = {
        date: dateEl.value || new Date().toISOString().slice(0,10),
        sleep: parseFloat(sleepEl.value) || 0,
        food: foodEl.value || "Unknown",
        water: parseInt(waterEl.value) || 0,
        exercise: parseInt(exerciseEl.value) || 0
    };

    const data = loadData();
    data.push(entry);
    saveData(data);
    render();
}

saveBtn.onclick = saveEntry;
saveBtnTop.onclick = saveEntry;

resetBtn.onclick = () => {
    dateEl.value = "";
    sleepEl.value = "";
    foodEl.value = "";
    waterEl.value = "";
    exerciseEl.value = "";
};

exportBtnTop.onclick = () => {
    const data = loadData();
    if (!data.length) return alert("No data available.");

    let csv = "Date,Sleep,Food,Water,Exercise\n";
    data.forEach(d => {
        csv += `${d.date},${d.sleep},${d.food},${d.water},${d.exercise}\n`;
    });

    const blob = new Blob([csv], { type: "text/csv" });
    const url = URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    a.download = "diet_tracker.csv";
    a.click();

    URL.revokeObjectURL(url);
};

sampleBtnTop.onclick = () => {
    const sample = [
        {date:"2025-11-25",sleep:7.2,food:"Vegetables",water:5,exercise:20},
        {date:"2025-11-26",sleep:6.8,food:"Fast Food",water:3,exercise:5},
        {date:"2025-11-27",sleep:8.1,food:"Balanced Home Meal",water:7,exercise:30}
    ];

    const data = loadData();
    sample.forEach(s => data.push(s));

    saveData(data);
    render();
};

clearBtnTop.onclick = () => {
    if (confirm("Delete all entries?")) {
        localStorage.removeItem(KEY);
        render();
    }
};

/* ---------------------
   DARK MODE
--------------------- */
if (localStorage.getItem("theme") === "dark") {
    document.documentElement.classList.add("dark");
    themeToggle.textContent = "‚òÄÔ∏è";
}

themeToggle.onclick = () => {
    document.documentElement.classList.toggle("dark");
    const isDark = document.documentElement.classList.contains("dark");

    themeToggle.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
    localStorage.setItem("theme", isDark ? "dark" : "light");
};

render();
</script>

</body>
</html>
